Enlighten PyMOL plugin
============

PyMOL plugin to run the (automated) [protocols](https://github.com/marcvanderkamp/enlighten/blob/master/README.md) for atomistic simulations of enzyme-ligand systems.

We gratefully acknowledge funding from [BBSRC](http://www.bbsrc.ac.uk).

Aimed at: 

- Experimental biochemists/enzymologists interested in gaining detailed insight into protein-ligand / enzyme-substrate complexes.

Required:

- PyMOL version 1.5.0.5 or later (for Plugin Manager)

Instructions for installation of a *free* version of PyMOL:

- For [Mac OS](http://www.pymolwiki.org/index.php/MAC_Install)
- For [Linux](http://www.pymolwiki.org/index.php/Linux_Install)




##Install the Plugin:   

First, follow the instructions to download the complete Enlighten repository [here](https://github.com/marcvanderkamp/enlighten/blob/master/README.md).
Thereafter, ensure that the required programmes are installed ([AmberTools14 or later](http://www.ambermd.org), [propka-3.1](https://github.com/jensengroup/propka-3.1)).

Then, follow these steps:

1. Open PyMOL and use Plugin --> Plugin Manager.
1. Under __*Install from local file*__ click `Choose File...` 
2. Navigate to the enlighten/Pymol folder (where you've dowloaded the repository)
3. Choose `__init__.py`
    - If you are prompted to create a directory (e.g. /your/username/.pymol/startup), click `Yes`
    - You should then see a message: 
     
   *Plugin "Enlighten" has been installed*
4. Click `OK` and under the PyMOL Plugin menu, you should now see the *enlighten* plugin listed.
 
      

## Using the plugin
At the top of the plugin window, the user can specify either:

- a specific pdb-file to use by ticking `Choose from file`, and subsequently enter the location of this file in the **PDB file** field
- a PyMOL object to use, by ticking `Choose from selection` 
  
  
  
On the next lines, the user is asked to put in the paths to several directories or *folders*, which are filled with default values. Please fill in as appropriate:

- **enlighten folder**: the full path of the directory where the enlighten repository was downloaded, e.g. `/Users/myname/enlighten`
- **AMBER folder**: The full path of the directory where AmberTools was installed, e.g. `/Users/myname/amber16` (i.e. the AMBERHOME directory, used to obtain the location of the AmberTools programs)
- **Output folder**: The path to the directory where the output files for the protocols should be kept. 
	- __*Note:*__ the PREP protocol will generate a directory within this directory, based on the name of the pdb or PyMOL object used. The other protocols will also use this directory.
-  **Ligand name**: This should be the three-character residue name of the ligand as it is named in the pdb/PyMOL object.
-  **Ligand charge**: The net charge of the ligand (according to the hydrogens added). This is very important, as a wrong charge will cause problems with parameterisation.
-  **Time (ps)**: *Only relevant for the DYNAM protocol* - this is the simulation time. If >100, it will typically take a long time for the DYNAM protocol to finish.
 
 _See further the [tutorial](https://github.com/marcvanderkamp/enlighten/blob/master/tutorial/Enlighten%20Workshop.md)_




## Available protocols
Each Protocol is currently a button in the Plugin. The  PREP protocol needs to be run first, and the STRUCT protocol needs to be run prior to the DYNAM protocol. The buttons in the plugin should only become 'active' once the required protocols are run.

### PREP
PREP takes enzyme-ligand pdb file and generates ligand parameters, adds hydrogens, adds solvent (sphere), generates Amber topology/coordinate files.

- Uses the following AmberTools programs: antechamber (& sqm), prmchk2, pdb4amber, reduce, tleap  (see [ambermd.org](http://ambermd.org))
- Ideally requires installation of propka31 (and put in $PATH)
- Extensive comments in prep.sh provide more in-depth explanation of the steps in the protocol, etc.

### STRUCT
STRUCT takes the topology/coordinate files generated by prep.sh and performs brief simulated-annealing and minimisation protocol (to optimize structure).


### DYNAM
DYNAM runs a simple MD protocol. This protocol typically takes >30 min (on a single CPU), although this depends strongly on the size of the system (number of atoms).


## Tutorial
*Please see [here](https://github.com/marcvanderkamp/enlighten/blob/master/tutorial/Enlighten%20Workshop.md) for the tutorial.*
